<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="UTF-8">
  <title>Apex Triggers</title>
  <link rel="stylesheet" href="../test.css">
</head>

<body>
  <header>
    <h1>Apex Trigger Examples</h1>
  </header>

  <section>

    <!-- EXAMPLE 1 -->
    <div class="example">
      <p><span class="counter"></span> - Write a method for the trigger that updates the Rating field of a newly created
        Account to 'Hot' if the Industry field is 'Banking' or 'Healthcare'.</p>
      <button class="showSolution">Show Solution</button>
      <pre>
        public class HandlerClass {
          public static void updateRatingField(List&lt;Account&gt; listAcc){ <em> // listAcc represents Trigger.new </em>
            for(Account acc : listAcc){
               If(!Strinng.isBlank(acc.Industry) <span style='color:red'>&&</span> (acc.Industry == 'Banking' || acc.Industry == 'Healthcare')){
                  acc.Rating = 'Hot';
               }
           }
         }  
        }

        trigger AccountTrigger on Account (before insert) {
          if(Trigger.isBefore <span style='color:red'>&&</span> Trigger.isInsert){
            HandlerClass.updateRatingField(Trigger.new);
          }
        }      
      </pre>
    </div>

    <!-- EXAMPLE 2 -->
    <div class="example">
      <p><span class="counter"></span> - When a contact record is updated, write a trigger that changes the Description
        field to the profile name of the user who updated it.</p>
      <button class="showSolution">Show Solution</button>
      <pre>
        public class HandlerClass {
          public static void updateDescriptionField(List&lt;Contact&gt; conList){
            Profile profile = [SELECT Name FROM Profile WHERE Id = :UserInfo.getProfileId()];
            for(Contact con : conList){
                con.Description = 'This record was last updated by ' + profile.Name;
            }
          }        
        }

        trigger AccountTrigger on Account (before update) {
          if(Trigger.isBefore <span style='color:red'>&&</span> Trigger.isUpdate){
            HandlerClass.updateDescriptionField(Trigger.new);
          }
        }                     
      </pre>
    </div>

    <!-- EXAMPLE 3 -->
    <div class="example">
      <p><span class="counter"></span> - Please write a trigger that throws an error when a user wants to delete a
        contact record that is not related to any Account.</p>
      <button class="showSolution">Show Solution</button>
      <pre>
        public class HandlerClass {
          public static void contactDeleteError(List&lt;Contact&gt; conList){ <em> // conList represents Trigger.old</em> 
            for(Contact con : conList){
                If(String.isBlank(con.AccountId)){
                    con.addError('You have no permission to perform this action.');
                }
            }
          }              
        }

        trigger AccountTrigger on Account (before delete) {
          if(Trigger.isBefore <span style='color:red'>&&</span> Trigger.isDelete){
            HandlerClass.contactDeleteError(Trigger.old);
          }
        }              
        </pre>
    </div>

    <!-- EXAMPLE 4 -->
    <div class="example">
      <p><span class="counter"></span> - Write a method that returns the Accounts whose Name contains the value entered
        in the parameter.</p>
      <button class="showSolution">Show Solution</button>
      <pre>
          <em> // We can use % and _ as wildcards. </em>
          public class GetRecords {
             public static List&lt;Account&gt; getAccount(String str){
               return [SELECT Name, NumberOfEmployees FROM Account WHERE Name LIKE :('%'+str+'%')];
             }
          }        
          
          <em> // We call the method in a for loop with a parameter value. </em>
          for(Account acc:GetRecords.getAccount('United')){
             System.debug(acc.Name + ' => ' + acc.NumberOfEmployees);
          }
        </pre>
    </div>



  </section>

  <script src="examples.js"></script>

</body>

</html>